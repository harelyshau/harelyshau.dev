<core:FragmentDefinition
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    core:require="{
        formatter: 'pharelyshau/model/formatter',
        formatMessage: 'sap/base/strings/formatMessage',
        Integer: 'sap/ui/model/type/Integer'
    }">
    <Dialog title="Set up field" icon="sap-icon://table-view"
        afterClose="startTimer" binding="{view>/CustomLevel}">
        <HBox class="sapUiSmallMargin" justifyContent="SpaceBetween" id="settingsBox">
            <VBox>
                <Label text="Width" showColon="true" design="Bold"/>
                <Input width="5em" type="Number"
                    value="{
                        path: 'view>Width',
                        type: 'Integer',
                        constraints: { minimum: 1, maximum: 100}
                    }"/>
            </VBox>
            <VBox>
                <Label text="Height" showColon="true" design="Bold"/>
                <Input width="5em" type="Number"
                    value="{
                        path: 'view>Height',
                        type: 'Integer',
                        constraints: { minimum: 1, maximum: 100}
                    }"/>
            </VBox>
            <VBox>
                <Label text="Mines" showColon="true" design="Bold"/>
                <Input width="5em" type="Number"
                id="inpMines"
                    value="{path: 'view>Mines', type: 'sap.ui.model.type.Integer' }"
                    valueState="{ parts: ['view>Mines', 'view>Width', 'view>Height'], formatter: 'formatter.minesCountState' }"
                    valueStateText="{= 1 > ${view>Mines} 
                        ? 'Enter a number greater than or equal to 1' 
                        : ${view>Mines} >= ${view>Width} * ${view>Height} 
                            ? 'Enter a number less than or equal to ' + (${view>Width} * ${view>Height} - 1)
                            : '' }"/>
            </VBox>
        </HBox>
        <beginButton>
            <Button text="Apply" type="Emphasized" press="onPressApplySettings"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>btnClose}" press="onPressCloseModalWindow"/>
        </endButton>
    </Dialog>
</core:FragmentDefinition>