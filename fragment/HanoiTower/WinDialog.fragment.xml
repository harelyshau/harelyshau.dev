<core:FragmentDefinition
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    core:require="{formatter: 'pharelyshau/model/formatter'}">
    <Dialog title="You dealt with Tower of {/DiscCount} Disks" state="Success" afterClose="onAfterCloseWinDialog">
        <VBox class="sapUiSmallMargin">
            <!-- Result -->
            <VBox renderType="Bare">
                <Title text="{i18n>ttlYourResult}:" titleStyle="H6"/>
                <HBox class="sapUiTinyMarginTop">
                    <!-- Time -->
                    <HBox renderType="Bare" alignItems="Center">
                        <core:Icon src="{i18n>iTime}"/>
                        <Text text="{i18n>ttlTime}: {path: '/Time', formatter: 'formatter.timeMinSec'}" class="sapUiTinyMarginBegin"/>
                    </HBox>
                    <!-- Moves -->
                    <HBox renderType="Bare" alignItems="Center" class="sapUiSmallMarginBegin"
                        tooltip="{= ${/Moves} === 2 ** ${/DiscCount} - 1 ? 'You did it in the minimum number of moves' : '' }">
                        <core:Icon src="{i18n>iStep}"
                            color="{= ${/Moves} === 2 ** ${/DiscCount} - 1 ? 'Positive' : '' }"/>
                        <Text text="{i18n>ttlMoves}: {/Moves}" class="sapUiTinyMarginBegin"/>
                    </HBox>
                </HBox>
            </VBox>
            <!-- New Record -->
            <VBox class="sapUiSmallMarginTop" renderType="Bare" visible="{= !!${view>/previousRecord}
                &amp;&amp; (${view>/previousRecord/Time} > ${/Time} || ${view>/previousRecord/Moves} > ${/Moves}) }">
                <Title text="New Record:" titleStyle="H6"/>
                <HBox class="sapUiTinyMarginTop">
                    <!-- Time -->
                    <HBox visible="{= ${view>/previousRecord/Time} > ${/Time} }"
                        renderType="Bare" alignItems="Center" class="sapUiSmallMarginEnd">
                        <core:Icon src="{i18n>iTime}" class="sapUiTinyMarginEnd"/>
                        <Text text="{= ${view>/previousRecord/Time} - ${/Time} } sec faster"/>
                    </HBox>
                    <!-- Moves -->
                    <HBox visible="{= ${view>/previousRecord/Moves} > ${/Moves} }"
                        renderType="Bare" alignItems="Center">
                        <core:Icon src="{i18n>iStep}" class="sapUiTinyMarginEnd"/>
                        <Text text="{= ${view>/previousRecord/Moves} - ${/Moves} } moves fewer"/>
                    </HBox>
                </HBox>
                <Button text="{i18n>btnSeeRecords}" icon="{i18n>iAchievement}"
                    press="onPressOpenRecordsDialog" class="sapUiTinyMarginTop"/>
            </VBox>
        </VBox>
        <beginButton>
            <Button text="{i18n>btnLevelUp}" press="onPressLevelUp" icon="{i18n>iLevelUp}" type="Emphasized"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>btnRestart}" icon="{i18n>iRestart}" press="onPressCloseWinDialog"/>
        </endButton>
    </Dialog>
</core:FragmentDefinition>
