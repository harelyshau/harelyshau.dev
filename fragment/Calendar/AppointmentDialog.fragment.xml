<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
    <Dialog stretch="{device>/system/phone}" resizable="true" draggable="true"
        afterClose="onAfterCloseAppointmentDialog">
        <customHeader>
            <Toolbar style="Clear">
                <Title text="{= ${Mode} === 'create' ? 'Make Appointment' : 'Edit Appointment' }"
                    class="phNoMargin"/>                
                <ToolbarSpacer/>
                <Button visible="{device>/system/phone}" tooltip="{i18n>btnClose}"
                    press="onPressCloseAppointmentDialog" icon="{i18n>iClose}"/>
            </Toolbar>
        </customHeader>
        <VBox class="sapUiSmallMarginBeginEnd">
            <!-- Title -->
            <VBox class="sapUiSmallMarginTop">
                <Label text="Title:" labelFor="inpTitle"/>
                <Input value="{Name}" valueLiveUpdate="true" placeholder="Title for Appointment"/>
            </VBox>
            <!-- Email -->
            <VBox class="sapUiSmallMarginTop">
                <Label text="Your Email:" required="{= ${Mode} !== 'view' }" labelFor="inpEmail"/>
                <Input id="inpEmail" required="true" type="Email" placeholder="your@email.com"
                    value="{path: 'Email', type: 'sap.ui.model.type.String', constraints: {search: '^((?!\\.)[\\w-_.]*[^.])(@\\w+)(\\.\\w+(\\.\\w+)?[^.\\W])$'} }"/>
                <!-- <Input required="true" type="Email" placeholder="your@email.com"
                    value="{path: 'Email', type: '.types.email'}"/> -->
            </VBox>
            <!-- Date and Time -->
            <VBox class="sapUiSmallMarginTop">
                <Label text="Date &amp; Time:" required="{= ${Mode} !== 'view' }"/>
                <HBox justifyContent="SpaceBetween"
                    renderType="Bare" wrap="{= ${device>/system/phone} ? 'Wrap' : 'NoWrap' }">
                    <Label width="0" text="Start Date" labelFor="dtpStartDate"/> <!-- invsible -->
                    <DateTimePicker id="dtpStartDate" minutesStep="15" change="onChangePicker($event ,'StartDate')"
                        required="true" minDate="{= ${Mode} === 'create' ? ${view>/currentDate} : null }" showCurrentDateButton="true"
                        value="{path: 'StartDate', mode: 'OneWay', type: 'sap.ui.model.type.DateTime', formatOptions: {style: 'medium/short'}}"/>
                    <Label visible="{= !${device>/system/phone} }" text="â€”" class="sapUiTinyMarginBeginEnd sapUiTinyMarginTop"/>
                    <Label width="0" text="End Date" labelFor="dtpEndDate"/> <!-- invsible -->
                    <DateTimePicker id="dtpEndDate" minutesStep="15" change="onChangePicker($event ,'EndDate')"
                        required="true" minDate="{StartDate}" showCurrentDateButton="true"
                        value="{path: 'EndDate', mode: 'OneWay', type: 'sap.ui.model.type.DateTime', formatOptions: {style: 'medium/short'}}"/>
                </HBox>
            </VBox>
            <!-- Conference -->
            <VBox class="sapUiSmallMarginTop">
                <Label text="Conference:" labelFor="inpConference"/>
                <VBox>
                    <Input value="{Conference}" type="Url"
                        valueState="{path: 'Conference', formatter: '.formatter.conferenceState'}"
                        valueStateText="{path: 'Conference', formatter: '.formatter.conferenceStateText'}"
                        placeholder="Add link to Conference or add Google Meet"/>
                    <!-- <Button text="Add Google Meet video conferencing" width="100%"
                        icon="/resource/image/GoogleMeetIcon.svg"/> -->
                </VBox>
            </VBox>
            <!-- Agenda -->
            <VBox class="sapUiSmallMarginTopBottom">
                <Label text="Agenda:"/>
                <TextArea width="100%" value="{Description}" valueLiveUpdate="true"
                    rows="4" placeholder="Some points to discuss and additional info"/>
            </VBox>
        </VBox>
        <beginButton>
            <Button text="{= ${Mode} === 'create'? 'Create' : 'Save' }" type="Emphasized" press="onPressCreateEditAppointment"/>
        </beginButton>
        <endButton>
            <Button visible="{= !${device>/system/phone} }" text="Cancel"
                press="onPressCloseAppointmentDialog"/>
        </endButton>
    </Dialog>
</core:FragmentDefinition>