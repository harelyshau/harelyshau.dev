<mvc:View xmlns:core="sap.ui.core"
    controllerName="pharelyshau.controller.Minesweeper"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m"
	xmlns:f="sap.f"
    core:require="{formatter: 'pharelyshau/model/formatter'}"
    xmlns:dnd="sap.ui.core.dnd"
    xmlns:grid="sap.ui.layout.cssgrid">
	<f:DynamicPage>
        <!-- HEADER -->
		<f:title>
			<f:DynamicPageTitle>
				<f:heading>
					<Title text="{i18n>ttlMinesweeper}" wrapping="true"/>
				</f:heading>
				<f:snappedContent>
                    <Label text="{i18n>lTryHanoiTower}" wrapping="true"/>
                </f:snappedContent>
                <f:expandedContent>
                    <Label text="{i18n>lTryHanoiTower}" wrapping="true"/>
                </f:expandedContent>
			</f:DynamicPageTitle>
		</f:title>
		<f:content>
			<VBox class="phLimitedPageContent sapUiMediumMarginBottom" alignItems="Center" renderType="Bare" >
                <Panel>
                    <!-- HEADER TOOLBAR -->
                    <headerToolbar>
                        <OverflowToolbar height="3rem">
                            <!-- Levels -->
                            <!-- <Label id="lblLevels" text="{i18n>lLevel}" showColon="true">
                                <layoutData>
                                    <OverflowToolbarLayoutData group="1" priority="Low"/>
                                </layoutData>
                            </Label> -->
                            <Select items="{/Levels}" selectedKey="{path: '/Level/Key', mode: 'OneWay'}"
                                change="onChangeLevel" ariaLabelledBy="lblLevels">
                                <core:ListItem text="{Key}" key="{Key}"/>
                                <layoutData>
                                    <OverflowToolbarLayoutData group="1" priority="Low"/>
                                </layoutData>
                            </Select>
                            <ToolbarSpacer/>
                            <HBox renderType="Bare">
                                <!-- Time -->
                                <HBox renderType="Bare" alignItems="Center">
                                    <core:Icon src="{i18n>iTime}" class="sapUiTinyMarginEnd"/>
                                    <Title text="{= !${device>/system/phone} ? ${i18n>ttlTime} + ':' : '' }
                                        {parts: ['/Time', 'i18n>tHour', 'i18n>tMinute', 'i18n>tSecond', 'i18n>tSec'], formatter: 'formatter.timeMinSec'}"/>
                                </HBox>
                                <Button text="{= !${/CellsLeft} ? 'ðŸ˜Ž' : ${/GameFinished} ? 'ðŸ˜µ' : 'ðŸ™‚' }" type="Ghost" press="onPressRestartGame" class="sapUiSmallMarginBeginEnd"/>
                                <!-- Mines -->
                                <HBox renderType="Bare" alignItems="Center">
                                    <core:Icon src="sap-icon://flag-2" class="sapUiTinyMarginEnd"/>
                                    <Title text="{= !${device>/system/phone} ? ${i18n>ttlMines} + ':' : '' } {/Mines}" class="sapUiMediumMarginEnd"/>
                                </HBox>
                            </HBox>
                            <ToolbarSpacer/>
                             <!-- <Title text="{/CellsLeft}" /> -->
                            <!-- Buttons -->
                            <!-- <Button text="{i18n>btnRestart}" press="onPressRestartGame" icon="{i18n>iRestart}"/> -->
                            <Button text="{i18n>btnRecords}" press="onPressOpenRecordsDialog" icon="{i18n>iAchievement}"/>
                        </OverflowToolbar>
                    </headerToolbar>
                    <!-- GAME -->
                    <ScrollContainer class="sapUiSmallMarginTopBottom">
                        <VBox items="{/Field}" renderType="Bare" id="gameBox">
                            <HBox items="{ path: '', templateShareable: false }" renderType="Bare" justifyContent="Center" height="2em">
                                <Button text="{= ${IsOpen} &amp;&amp; ${IsMine} ? 'ðŸ’£' : ${MineCount} }"
                                    type="Unstyled"
                                    enabled="{= !${IsOpen} }"
                                    width="2em" press="onPressCell"
                                    class="phCell">
                                    <customData>
                                        <core:CustomData key="cell" writeToDom="true"
                                            value="color{path: '', formatter: 'formatter.colorMineCount'}"/>
                                    </customData>
                                </Button>
                            </HBox>

                            <!-- <VBox height="2em">
                                    <ObjectStatus text="{= ${IsOpened} ? ${IsMine} ? '*' : ${parts: ['/Field', ''], formatter: 'formatter.mineCountNearby' } : 'O' }"
                                        state="{= ${IsOpened} &amp;&amp; ${IsMine} ? 'Error' : 'None' }"
                                        active="{= !${IsOpened} }"
                                        inverted="true"
                                        press="onPressCell"/>
                                </VBox> -->
                        </VBox>
                    </ScrollContainer>
                </Panel>
                <!-- INSTRUCTIONS -->
                <!-- <core:Fragment fragmentName="pharelyshau.fragment.HanoiTower.Instructions"
					type="XML" class="sapUiSmallMarginTop"/> -->
			</VBox>
		</f:content>
	</f:DynamicPage>
</mvc:View>